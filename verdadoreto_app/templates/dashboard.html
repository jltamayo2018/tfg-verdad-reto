{% extends "base.html" %}
{% block title %}Mis packs{% endblock %}

{% block content %}
  <div class="container">
    <h2 class="neon-title">Mis packs</h2>

    <p>
      <a class="btn btn-primary btn-wide" href="{% url 'pack_create' %}">
        + Crear nuevo pack
      </a>
    </p>

    {% if packs %}
      <section class="packs-grid" aria-label="CuadrÃ­cula de packs">
        {% for p in packs %}
          <!-- Contenedor relativo para superponer los botones sin meterlos dentro del <a> -->
          <div class="pack-card-wrap" style="position:relative;">
            <!-- La tarjeta sigue siendo un <a>; clic en cualquier parte va al detalle -->
            <a href="{% url 'pack_detail' p.pk %}"
               class="pack-card neon-card"
               aria-label="Abrir pack {{ p.name }}">
              <div class="neon">{{ p.name }}</div>
              {% if p.creation_date %}
                <div class="pack-meta">{{ p.creation_date|date:"d/m/Y H:i" }}</div>
              {% endif %}
            </a>

            <!-- Botones: fuera del <a>, posicionados en esquina inferior der -->
            <div class="pack-tools" style="position:absolute; right:12px; bottom:12px; display:inline-flex; gap:8px; z-index:2;">
              <a href="{% url 'pack_rename' p.pk %}"
                 class="icon-btn"
                 title="Editar nombre"
                 aria-label="Editar nombre">
                <span aria-hidden="true">âœï¸</span>
              </a>

              <form action="{% url 'pack_delete' p.pk %}"
                    method="post"
                    class="inline"
                    style="margin:0;">
                {% csrf_token %}
                <button type="submit"
                        class="icon-btn danger"
                        title="Eliminar pack"
                        aria-label="Eliminar pack"
                        onclick="return confirm('Â¿Seguro que quieres eliminar este pack?');">
                  <span aria-hidden="true">ğŸ—‘ï¸</span>
                </button>
              </form>
            </div>
          </div>
        {% endfor %}
      </section>
    {% else %}
      <div class="card">
        <p class="muted">AÃºn no tienes packs. Crea el primero.</p>
      </div>
    {% endif %}
  </div>
{% endblock %}
